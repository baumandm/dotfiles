if [[ $COLORTERM = gnome-* && $TERM = xterm ]] && infocmp gnome-256color >/dev/null 2>&1; then
export TERM=gnome-256color
elif infocmp xterm-256color >/dev/null 2>&1; then
export TERM=xterm-256color
fi

RESET=$(tput sgr0)       # Text Reset
BLACK='\e[0;30m'         # Black
RED='\e[0;31m'           # Red
GREEN=$(tput setaf 2)    # Green
YELLOW='\e[0;33m'        # Yellow
BLUE='\e[0;34m'          # Blue
PURPLE=$(tput setaf 1)   # Purple
CYAN='\e[0;36m'          # Cyan
WHITE=$(tput setaf 7)    # White
ORANGE=$(tput setaf 172) # Orange
BOLD=$(tput bold)        # Bold

export RESET
export BLACK
export RED
export GREEN
export YELLOW
export BLUE
export PURPLE
export CYAN
export WHITE
export ORANGE
export BOLD


function parse_git_dirty() {
[[ $(git status 2> /dev/null | tail -n1) != *"working directory clean"* ]] && echo "*"
}

function parse_git_branch() {
git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1$(parse_git_dirty)/"
}

export PS1="[\[${MAGENTA}\]\u\[$WHITE\]@\[$CYAN\]\h \[$GREEN\]\w\[$RESET\]\[$WHITE\]\$([[ -n \$(git branch 2> /dev/null) ]] && echo \" on \")\[$YELLOW\]\$(parse_git_branch)]\[$WHITE\]\$ \[$RESET\]"
export PS2="\[$CYAN\]â†’ \[$RESET\]"